---
title: 'Synchronisieren von WebVTT-Untertiteln'
description: In diesem Thema erfahren Sie, wie Sie WebVTT-Untertitel für HLS-Videos konfigurieren, um Audio und Video mit den Untertiteln zu synchronisieren.
parent: Features 
grandparent: Home
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Überblick</h2>

<p>Die Datei Web Video Text Tracks (WebVTT) ist eine einfache Textdatei, die verwendet wird, um Untertitel, Untertitel, Beschreibungen usw. mit Zeitsegmenten in Ihrem Video zu verknüpfen.</p>

<pre class="line-numbers">
<code class="language-html" translate="No">WEBVTT

  00:00:03.50 --&gt; 00:00:05.000 align:middle line:84%
  In this video, you'll learn
  about how Video Cloud Studio is</code></pre>

<p>Weitere Informationen zum Hinzufügen einer WebVTT-Datei finden Sie im <a href="https://player.support.brightcove.com/general/adding-captions-videos-programmatically.html">Untertitel zu Videos hinzufügen</a> dokumentieren.</p>

<!-- <p>The <a href="https://github.com/brightcove/brightcove-player-sdk-ios-sidecarsubtitles">Sidecar Subtitles plugin</a> enables you to use WebVTT captions in your iOS and tvOS apps.</p> -->
</section>

<section class="bcls-section">
<h2 id="Add_a_metadata_header">Fügen Sie einen Metadaten-Header hinzu</h2>

<p>Als Teil der HLS-Spezifikation müssen Sie ein <code translate="No">X-TIMESTAMP-MAP</code> Metadaten-Header an jeden WebVTT-Header, um Zeitstempel zwischen Audio und Video mit Ihren Untertiteln zu synchronisieren.</p>

<p>Wenn Sie diesen Header oder die <code translate="No">MPEGTS</code> Wenn der Wert nicht korrekt ist, stellen Sie möglicherweise fest, dass Ihre Untertitel nicht mit dem Video synchronisiert sind. Dies liegt daran, wenn die <code translate="No">X-TIMESTAMP-MAP</code> Header fehlt, nimmt der Client einen Standard-Zeitstempel-Offset von . an <strong>0</strong>. Der Unterschied zwischen der Verwendung eines Wertes von <strong>900000</strong> und <strong>0</strong> kann dazu führen, dass Ihre Untertitel um 10 Sekunden abweichen.</p>

<p><code translate="No">X-TIMESTAMP-MAP</code> Format:</p>

<pre class="line-numbers">
<code class="language-swift" translate="No">X-TIMESTAMP-MAP=MPEGTS:&lt;MPEG-2 time&gt;,LOCAL:&lt;cue time&gt;</code></pre>
<!-- <p><code data-gist-id="d59006640cce4709fdc2" data-gist-line="2" data-gist-hide-footer="true"></code></p> -->

<p>Hier ist eine WebVTT-Beispieldatei:</p>

<aside class="bcls-aside bcls-aside--information">Die <code translate="No">X-TIMESTAMP-MAP</code> Kopfzeile muss in Zeile 2 stehen, direkt nach dem <code translate="No">WEBVTT</code> Leitung. Es kann zu unerwarteten Ergebnissen kommen, wenn der Timestamp-Header nicht in Zeile 2 platziert wird.</aside>

<pre class="line-numbers">
<code class="language-swift" translate="No">WEBVTT
<span class="bcls-highlight">X-TIMESTAMP-MAP=MPEGTS:900000,LOCAL:00:00:00.000</span>

1
00:00:03.500 --&gt; 00:00:05.000 align:middle line:84%
In this video, you'll learn
about how Video Cloud Studio is</code></pre>
<!-- <p><code data-gist-id="d59006640cce4709fdc2" data-gist-line="5-11" data-gist-highlight-line="6" data-gist-hide-footer="true"></code></p> -->

<p>Einzelheiten finden Sie im <a href="https://tools.ietf.org/html/draft-pantos-http-live-streaming-18#section-3">Untertitelsegmente</a> Abschnitt des HLS-Protokolldokuments von Apple.</p>
</section>

<section class="bcls-section">
<h2 id="Determine_the_offset_value">Bestimmen Sie den Offset-Wert</h2>

<p>Wenn Sie Dynamic Ingest oder Zencoder von Brightcove zum Transkodieren Ihrer Inhalte verwenden, verwenden Sie einen Offset-Wert von <code translate="No">MPEGTS:900000</code>.</p>

<p>Wenn Sie ein anderes Kodierungssystem als Zencoder verwenden, ist es am besten, den benötigten Wert zu ermitteln. Apple empfiehlt, dass Sie den Versatz so einstellen, dass er mit Ihrem codierten Video übereinstimmt.</p>

<p>Die <code translate="No">MPEGTS</code> value entspricht dem Präsentationszeitstempelwert (PTS) des MPEG-Frames zum gegebenen <code translate="No">LOCAL</code> Zeit. Wenn Sie das ältere Aufnahmesystem von Brightcove verwenden, können Sie möglicherweise einen Wert von verwenden <code translate="No">MPEGTS:0</code>.</p>

<p>Wenn Ihr Konto aktiviert ist für <a href="https://studio.support.brightcove.com/general/overview-dynamic-delivery.html">Dynamische Lieferung</a> , und du hostest Untertitel bei uns <em>(nicht entfernte Untertitel)</em>, dann werden wir alles automatisch zum Laufen bringen (PTS muss Null sein und wir werden sicherstellen, dass dies der Fall ist.)</p>

<p>Wenn Ihr Konto für Dynamic Delivery aktiviert ist und Sie verwenden <strong><em>Fernbedienung</em></strong> Bildunterschriften müssen Sie den PTS-Wert auf Null setzen.</p>

<p>Um beispielsweise den Offset-Wert abzurufen, können Sie Folgendes tun:</p>

<h3>Anfrage1:</h3>

<p>Holen Sie sich im Terminal ein HLS-Video und speichern Sie es in einer lokalen Datei. In diesem Fall nennen wir es <code translate="No">seg.ts</code>.</p>

<pre class="line-numbers">
<code class="language-http" translate="No">curl -o seg.ts "http://brightcove.vo.llnwd.net/v1/unsecured/media/4360108595001/201507/1154/4360341622001/4360108595001_4360341622001_s-1.ts?pubId=4360108595001&amp;videoId=4360283683001"</code></pre>
<!-- <p><code data-gist-id="d59006640cce4709fdc2" data-gist-line="17-18"></code></p> -->

<h3>Anfrage2:</h3>

<p>Verwenden Sie dann die <code translate="No">ffprobe</code> Befehl, um den Offset-Wert zu erhalten. <code translate="No">ffprobe</code> ist ein Multimedia-Stream-Analyzer, der Teil der <a href="//ffmpeg.org/about.html">FFmpeg-Framework</a>. Sie müssen diese herunterladen und auf Ihrem Computer installieren.</p>

<pre class="line-numbers">
<code class="language-http" translate="No">ffprobe -show_frames seg.ts</code></pre>

<h3>Antwort:</h3>

<p>Ihre Antwort sollte ungefähr so aussehen:</p>

<pre class="line-numbers">
<code class="language-html" translate="No"><span class="bcls-highlight">pkt_pts=900000</span>
pkt_pts_time=10.000000
pkt_dts=900000
pkt_dts_time=10.000000</code></pre>
<!-- <p><code data-gist-id="d59006640cce4709fdc2" data-gist-line="21-24" data-gist-highlight-line="21" data-gist-hide-footer="true"></code></p> -->

<br/>
<aside class="bcls-aside bcls-aside--warning">Das Hinzufügen des X-TIMESTAMP-MAP-Headers kann auf anderen Plattformen wie Windows Mobile-Anwendungen zu Inkonsistenzen führen. Stellen Sie sicher, dass Sie auf allen Plattformen testen, nachdem Sie den Offset-Header hinzugefügt haben. Das Hinzufügen dieses Header-Tags ist eine HLS-Spezifikationsanforderung und kein WebVTT-Spezifikationsparameter.</aside>
</section>

<section class="bcls-section">
<h2 id="Best_practices">Empfohlene Vorgehensweise</h2>

<p>Die folgenden Richtlinien sollen Ihnen bei der Entwicklung Ihrer App mit Untertiteln helfen.</p>

<h3>Untertiteldauer</h3>

<p>Es wird empfohlen, dass die Untertiteldauer die Videodauer nicht überschreitet. Dadurch wird verhindert, dass Untertitel angezeigt werden oder ein nicht durchsuchbarer Bereich in der Fortschrittsleiste angezeigt wird, nachdem die Videowiedergabe abgeschlossen ist.</p>
</section>
</article>