---
title: 'Android Pie-Unterstützung mit dem nativen SDK für Android'
description: In diesem Thema erfahren Sie, wie Sie Android Pie mit dem Brightcove Native SDK für Android verwenden.
parent: Framework 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Überblick</h2>

<p>Android Pie ist das neueste Android-Betriebssystem und wurde offiziell am 6. August 2018 veröffentlicht. Einzelheiten zu den Funktionen finden Sie im <a href="https://developer.android.com/about/versions/pie/android-9.0">Android Pie-Funktionen</a> dokumentieren. Android Pie enthält mehrere Verhaltensänderungen. Die meisten davon betreffen Apps, die auf Android Pie (API-Ebene 28) abzielen, aber Sie können auch Probleme mit Apps finden, die auf eine ältere Android-Version abzielen und auf einem Android Pie-Gerät ausgeführt werden.</p>

<figure class="bcls-figure"><img class="bcls-image--no-border" alt="Android 9 Pie" src="/assets/images/android/framework/android-pie.png" />
<figcaption class="bcls-caption--image">Android 9 Pie</figcaption>
</figure>

<p>Bei der Verwendung des Brightcove SDK für Android sind einige Änderungen zu beachten:</p>

<ul>
	<li><a href="">TLS standardmäßig aktiviert</a></li>
	<li><a href="">Einstellung des Apache HTTP-Clients</a></li>
	<li><a href="">Veraltete Konstanten</a></li>
</ul>

<p>Eine vollständige Liste der Verhaltensänderungen für Ihre Apps finden Sie im <a href="https://developer.android.com/about/versions/pie/android-9.0-changes-all">Verhaltensänderungen für alle Apps</a> dokumentieren. Informationen zu Verhaltensänderungen ausschließlich bei der Ausrichtung auf Android Pie finden Sie im <a href="https://developer.android.com/about/versions/pie/android-9.0-changes-28">Verhaltensänderungen für API 28+</a> dokumentieren.</p>
</section>

<section class="bcls-section">
<h2 id="TLS_enabled_by_default">TLS standardmäßig aktiviert</h2>

<p>Transport Layer Security (TLS) ist ein Protokoll zur Bereitstellung einer sicheren Kommunikation über ein Computernetzwerk. TLS wird auf HTTP implementiert und ermöglicht eine verschlüsselte Kommunikation über HTTPS.</p>

<p>Als Google Android Marshmallow (API-Level 23) veröffentlichte, stellte es eine Konfiguration zum Deaktivieren des Klartextverkehrs bereit, die Ihre App daran hindern würde, klare HTTP-Anfragen zu stellen. Mit der Veröffentlichung von Android Pie (API-Level 28) ist der Klartextverkehr standardmäßig deaktiviert.</p>

<p>Wenn der Klartextverkehr standardmäßig deaktiviert ist und Ihre Anwendung versucht, eine klare HTTP-Anforderung auszuführen, wird eine IOException mit der folgenden Meldung ausgelöst:</p>

<pre>
<code class="language-java" translate="No">Exception: IOException java.io.IOException: Cleartext HTTP traffic to * not permitted</code></pre>

<p>Weitere Informationen finden Sie auf der Website von Google: <a href="https://developer.android.com/about/versions/pie/android-9.0-changes-28#framework-security-changes">Änderungen der Framework-Sicherheit</a> und <a href="https://developer.android.com/training/articles/security-config">Konfiguration der Netzwerksicherheit</a>.</p>

<p>Wenn Ihre App auf Android Pie (API-Ebene 28) oder höher ausgerichtet ist, müssen Sie diese Verhaltensänderung verarbeiten, damit Ihre App wie erwartet funktioniert. Sie haben drei Möglichkeiten:</p>

<ul>
	<li><a href="#HTTPS_only">Stellen Sie sicher, dass Ihre App nur HTTPS-Anfragen stellt</a></li>
	<li><a href="#HTTP_for_all_domains">Aktivieren Sie klaren HTTP-Verkehr für alle Domänen</a></li>
	<li><a href="#HTTP_for_specific_domains">Klaren HTTP-Datenverkehr für bestimmte Domains aktivieren</a></li>
</ul>
<!-- <p>With the release of Android Pie (API level 28), clear text traffic is disabled by default. If your application attempts to do a clear HTTP request, an <code translate="No">IOException</code> will be thrown with the message:</p>
  <pre><code class="language-java" translate="No">Exception: IOException java.io.IOException: Cleartext HTTP traffic to * not permitted</code></pre>
  <p>
    To learn more about managing TLS with Android Pie, see the following document:
https://docs.google.com/document/d/1PfXOq59MG8s87gcwiZvzWCZ_CuKDpLi3VO-VRF_LkjY/edit?usp=sharing
  </p> -->

<h3 id="HTTPS_only">Nur HTTPS</h3>

<p>Eine Möglichkeit besteht darin, sicherzustellen, dass alle Ihre Netzwerkanforderungen HTTPS verwenden. Gehen Sie dazu wie folgt vor:</p>

<ol class="bcls-tasklist__restart">
	<li>
	<p>Aktivieren Sie Ihr CDN für eine sichere Kommunikation.</p>

	<ul>
		<li>Video Cloud-Kunden (unabhängig davon, ob Sie das hauseigene CDN oder ein benanntes CDN verwenden) sollten sich an ihre Brightcove-Kontomanager wenden, um sicherzustellen, dass Konten für die Bereitstellung über HTTPS konfiguriert sind.</li>
		<li>
			<p>
				Für diejenigen, die Remote-Assets verwenden, müssen Sie Ihr CDN möglicherweise entsprechend konfigurieren.
			</p>
		<aside class="bcls-aside bcls-aside--information">Wenn Sie BYO CDN verwenden, müssen Sie die korrekte <code translate="No">X-Forwarded-Proto: https</code> Überschriften. Für Akamai oder Cloudfront können Sie <code translate="No">X-Forwarded-Proto-Akamai</code> oder <code translate="No">CloudFront-Forwarded-Proto</code> bzw.</aside></li>
	</ul>
	</li>
	<li>
	<p>Verwenden Sie sichere Kommunikation, um Ihre Medieninhalte bereitzustellen. Dazu gehören Videos, Anzeigen, Bildunterschriften, Posterbilder, Miniaturansichten und andere API-Verbindungen von Drittanbietern.</p>

	<ul>
		<li>
		<p>Video Cloud-Kunden: Verwenden Sie die Playback-API, um das sichere Protokoll für jedes Ihrer Assets abzurufen. Das Brightcove SDK für Android wählt standardmäßig HTTPS aus, wenn verfügbar.</p>

		<aside class="bcls-aside bcls-aside--information">Wenn Ihr Video sowohl HTTP- als auch HTTPS-Quellen für WebVTT-Untertitel/-Untertitel enthält, gibt das Native SDK für Android möglicherweise nicht die HTTPS-Version zurück. Brightcove ist sich dieser Situation bewusst und wird in einer zukünftigen Version Abhilfe schaffen.</aside>
		</li>
		<li>Brightcove Player-Kunden: Stellen Sie sicher, dass Ihre Medieninhalte über HTTPS bereitgestellt werden.</li>
	</ul>
	</li>
</ol>

<h3 id="HTTP_for_all_domains">HTTP für alle Domains</h3>

<p>Ihre App kann klaren HTTP-Traffic für alle Domains verwenden. Hier sind zwei Beispiele, wie Sie dies tun können:</p>

<ul>
	<li><a href="#Update_the_application_tag">Aktualisieren Sie das Anwendungs-Tag</a></li>
	<li><a href="#Add_a_network_security_configuration_file">Fügen Sie eine Konfigurationsdatei für die Netzwerksicherheit hinzu</a></li>
</ul>

<h4 id="Update_the_application_tag">Aktualisieren Sie das Anwendungs-Tag</h4>

<ol class="bcls-tasklist__restart">
	<li>
	<p>Um dies zu aktivieren, öffnen Sie das <strong>AndroidManifest</strong> Datei und fügen Sie die folgende Zeile in die <code translate="No">application</code> Schild. Zum Beispiel:</p>

	<pre>
<code class="language-java" translate="No">&lt;application
   android:name="mypackage.MyApplication"
   <span class="bcls-highlight">android:usesCleartextTraffic="true"&gt;</span>
…
&lt;/application&gt;</code></pre>
	</li>
</ol>

<h4 id="Add_a_network_security_configuration_file">Fügen Sie eine Konfigurationsdatei für die Netzwerksicherheit hinzu</h4>

<ol class="bcls-tasklist__restart">
	<li>
	<p>Erstellen Sie beispielsweise eine XML-Datei <strong>network-security-config.xml</strong> , und fügen Sie es dem hinzu <strong>res/xml</strong> Verzeichnis. Sehen Sie sich das folgende Beispiel an, um klaren Datenverkehr zuzulassen:</p>

	<pre>
<code class="language-java" translate="No">&lt;network-security-config&gt;
   &lt;base-config cleartextTrafficPermitted="true"/&gt;
&lt;/network-security-config&gt;</code></pre>
	</li>
	<li>
	<p>Legen Sie den Dateinamen in Ihrem . fest <strong>AndroidManifest</strong> Wie nachfolgend dargestellt:</p>

	<pre>
<code class="language-java" translate="No">&lt;application
 android:name="mypackage.MyApplication"
 <span class="bcls-highlight">android:networkSecurityConfig="@xml/network_security_config"&gt;</span>
…
&lt;/application&gt;</code></pre>

	<p>Weitere Informationen finden Sie unter Android <a href="https://developer.android.com/training/articles/security-config">Konfiguration der Netzwerksicherheit</a> dokumentieren.</p>
	</li>
</ol>

<h3 id="HTTP_for_specific_domains">HTTP für bestimmte Domains</h3>

<p>Sie können festlegen, dass bestimmte Domänen für die Verwendung von klaren HTTP-Anforderungen zugelassen werden. Gehen Sie dazu folgendermaßen vor:</p>

<ol class="bcls-tasklist__restart">
	<li>
	<p>Erstellen Sie beispielsweise eine XML-Datei <strong>network-security-config.xml</strong> , und fügen Sie es dem hinzu <strong>res/xml</strong> Verzeichnis. Im folgenden Beispiel erfahren Sie, wie Sie Ihre Domains einrichten:</p>

	<pre>
<code class="language-java" translate="No">&lt;network-security-config&gt;
 &lt;domain-config cleartextTrafficPermitted="true"&gt;
     &lt;domain includeSubdomains="true"&gt;c.brightcove.com&lt;/domain&gt;
     &lt;domain includeSubdomains="true"&gt;solutions.brightcove.com&lt;/domain&gt;
 &lt;/domain-config&gt;
&lt;/network-security-config&gt;</code></pre>
	</li>
	<li>
	<p>Legen Sie den Dateinamen in Ihrem . fest <strong>AndroidManifest</strong> Wie nachfolgend dargestellt:</p>

	<pre>
<code class="language-java" translate="No">&lt;application
 android:name="mypackage.MyApplication"
 <span class="bcls-highlight">android:networkSecurityConfig="@xml/network_security_config"&gt;</span>
…
&lt;/application&gt;</code></pre>

	<p>Weitere Informationen finden Sie unter Android <a href="https://developer.android.com/training/articles/security-config">Konfiguration der Netzwerksicherheit</a> dokumentieren.</p>

	<aside class="bcls-aside bcls-aside--information">Die <code translate="No">networkSecurityConfig</code> Parameter überschreibt die <code translate="No">usesCleartextTraffic</code> Parameter. Dies bedeutet, dass, wenn beide aktiviert sind, nur die deklarierten Domänen im <code translate="No">networkSecurityConfig</code> file-Parameter darf klare HTTP-Anforderungen verwenden.</aside>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Apache_HTTP_client_deprecation">Einstellung des Apache HTTP-Clients</h2>

<p>Bei Android Pie wurde die Unterstützung des Apache HTTP-Clients entfernt. Dies betrifft Apps, die auf Android Pie oder höher ausgerichtet sind. Es kann sich auch auf Apps auswirken, die auf ältere Android-Versionen abzielen, wenn ein nicht standardmäßiges <code translate="No">ClassLoader</code>. Zur Laufzeit, wenn die <code translate="No">ClassLoader</code> Versucht, eine Apache HTTP-Client-Klasse auf Android Pie zu laden, wird ein <code translate="No">NoClassDefFoundError</code>. Weitere Informationen finden Sie unter Googles: <a href="https://developer.android.com/about/versions/pie/android-9.0-changes-all#apache-nonp">Einstellung des Apache HTTP-Clients</a> dokumentieren.</p>

<p>Wenn Ihre App das Brightcove FreeWheel-Plugin verwendet, tritt dieses Problem auf und Sie erhalten eine Ausnahme wie hier gezeigt:</p>

<pre>
<code class="language-java" translate="No">java.lang.NoClassDefFoundError: tv.freewheel.utils.URLLoader
Caused by: java.lang.NoClassDefFoundError: Failed resolution of: Lorg/apache/http/impl/client/BasicCookieStore;</code></pre>

<p>Um dieses Problem zu beheben, fügen Sie die folgende Zeile in die Manifestdatei Ihrer App ein:</p>

<pre>
<code class="language-java" translate="No">&lt;uses-library android:name="org.apache.http.legacy" android:required="false"/&gt;</code></pre>
</section>

<section class="bcls-section">
<h2 id="Deprecated_constants">Veraltete Konstanten</h2>

<p>Es gibt mehrere Konstanten, die in der veraltet waren <a href="https://developer.android.com/reference/android/net/ConnectivityManager">KonnektivitätsManager</a> Klasse. Einige dieser Konstanten werden derzeit vom Brightcove SDK verwendet, insbesondere von den Offline-Wiedergabe- und Offline-Analysefunktionen. Hier ist die Liste:</p>

<ul>
	<li><code translate="No">android.net.ConnectivityManager.TYPE_BLUETOOTH</code></li>
	<li><code translate="No">android.net.ConnectivityManager.TYPE_ETHERNET</code></li>
	<li><code translate="No">android.net.ConnectivityManager.TYPE_MOBILE</code></li>
	<li><code translate="No">android.net.ConnectivityManager.TYPE_VPN</code></li>
	<li><code translate="No">android.net.ConnectivityManager.TYPE_WIFI</code></li>
	<li><code translate="No">android.net.ConnectivityManager.TYPE_WIMAX</code></li>
</ul>

<p>Dies hat keine Auswirkungen auf die Funktionalität der genannten Funktionen, aber beachten Sie, dass diese Konstanten in einer zukünftigen Android-Betriebssystemversion möglicherweise entfernt werden. Dies gilt auch für das Brightcove Native SDK.</p>
</section>
<!-- <section class="bcls-section">
<h2 id="Testing_limitations">Testing limitations</h2>

<p>Due to resource constraints, we have been unable to test the Brightcove SDK targeting Android Pie on a device that has a "cut-out" in its display. We are working on acquiring such a device to test with as soon as possible.</p>
</section> --></article>