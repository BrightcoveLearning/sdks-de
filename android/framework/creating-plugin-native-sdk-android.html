---
title: 'Erstellen eines Plugins für das Native SDK für Android'
description: In diesem Thema erfahren Sie, wie Sie ein Plugin für das Native SDK für Android erstellen.
parent: Framework 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Überblick</h2>

<p>Auf einer hohen Ebene integriert sich ein Plugin in den Player, indem es auf Ereignisse hört und diese ausgibt. Ein Plugin kann Ereignisse vom Player und von anderen Plugins abhören. Ein Plugin kann Ereignisse für den Player und für andere Plugins ausgeben.</p>

<p>Dieser Inhalt zusammen mit dem Beispielcode befindet sich unter <a href="https://github.com/BrightcoveOS/android-plugin-guide">https://github.com/BrightcoveOS/android-plugin-guide</a></p>
</section>

<section class="bcls-section">
<h2 id="Plugin_architecture">Plugin-Architektur</h2>

<div class="BCL-concept">
<p>Ein Plugin sollte sich beim SDK registrieren, wenn es instanziiert wird. Um ein Plugin zu registrieren sollte a . ausgeben <code translate="No">REGISTER_PLUGIN</code> Veranstaltung mit a <code translate="No">PLUGIN_NAME</code> Eigentum. Zum Beispiel:</p>

<pre class="line-numbers">
  <code class="language-java" translate="No">Map&lt;String, Object&gt; properties = new HashMap&lt;String, Object&gt;();
  properties.put(Event.PLUGIN_NAME, "my custom plugin");
  eventEmitter.emit(EventType.REGISTER_PLUGIN, properties);</code></pre>

<p>Die Videowiedergabe durchläuft normalerweise einen Standard-Lebenszyklus-Ereignisfluss:</p>

<figure class="bcls-figure"><img class="bcls-image" alt="Plugin event flow" src="/assets/images/android/framework/plugin-event-flow.png" />
<figcaption class="bcls-caption--image">Plugin-Ereignisablauf</figcaption>
</figure>
</div>
</section>

<section class="bcls-section">
<h2 id="Event_details">Veranstaltungsdetails</h2>

<div class="BCL-concept">
<p>Ein Plugin kann auf Ereignisse warten, die eine Aktion auslösen, um das Standardverhalten des Players zu ändern. Zu diesen Veranstaltungen gehören:</p>

<ol>
	<li><code translate="No">WILL_CHANGE_VIDEO</code></li>
	<li><code translate="No">SET_VIDEO</code></li>
	<li><code translate="No">SET_SOURCE</code></li>
	<li><code translate="No">PLAY</code></li>
	<li><code translate="No">PAUSE</code></li>
	<li><code translate="No">SEEK_TO</code></li>
	<li><code translate="No">STOP</code></li>
</ol>

<p>Das Standardverhalten kann geändert werden, indem verhindert wird, dass die Standardlistener das Ereignis empfangen, und/oder indem die Weitergabe des Ereignisses an nicht standardmäßige Listener gestoppt wird. Das Verhindern, dass die Standard-Listener das Ereignis empfangen, wird durch Aufrufen der <code translate="No">preventDefault()</code> Methode. Die Ereignisausbreitung kann durch Aufrufen der <code translate="No">stopPropagation()</code> Methode. Wenn nur <code translate="No">preventDefault()</code> aufgerufen wird, werden die restlichen nicht standardmäßigen Listener benachrichtigt. Wenn nur <code translate="No">stopPropagation()</code> aufgerufen wird, werden die Standard-Listener weiterhin benachrichtigt, aber der Rest der Nicht-Standard-Listener wird übersprungen. Ein Plugin kann diese Methoden auch verwenden, um den normalen Ereignisfluss zu unterbrechen und zusätzliches Verhalten einzufügen, z. B. das Plugin zu initialisieren. Ein Plugin kann den Ereignisfluss fortsetzen, indem es das ursprüngliche Ereignis erneut ausgibt.</p>

<p>Ein Plugin kann auch auf Ereignisse warten, die den Abschluss einer Aktion signalisieren. Diese Ereignisse werden normalerweise von Analyse-Plugins verwendet. Zu den Veranstaltungen gehören:</p>

<ol>
	<li><code translate="No">DID_CHANGE_LIST</code></li>
	<li><code translate="No">DID_SELECT_SOURCE</code></li>
	<li><code translate="No">DID_PAUSE</code></li>
	<li><code translate="No">DID_PLAY</code></li>
	<li><code translate="No">DID_SEEK_TO</code></li>
	<li><code translate="No">DID_SET_SOURCE</code></li>
	<li><code translate="No">DID_STOP</code></li>
	<li><code translate="No">PROGRESS</code></li>
	<li><code translate="No">COMPLETED</code></li>
</ol>
</div>
</section>

<section class="bcls-section">
<h2 id="Interrupt_playback">Wiedergabe unterbrechen</h2>

<div class="BCL-concept">
<p>Ein Plugin, das die Wiedergabe von Videoinhalten unterbrechen möchte, sollte verwenden <code translate="No">WILL_INTERRUPT_CONTENT</code> und <code translate="No">WILL_RESUME_CONTENT</code>. Diese Ereignisse werden typischerweise von Werbe-Plugins verwendet. Ein Plugin sollte ausgeben <code translate="No">WILL_INTERRUPT_CONTENT</code> zu verlangen, dass die Wiedergabe unterbrochen wird, falls sie gerade abgespielt wird, und zu verlangen, dass die Videoansicht unsichtbar gemacht wird. Ein Plugin sollte ausgeben <code translate="No">WILL_RESUME_CONTENT</code> zu verlangen, dass die Videoansicht wieder sichtbar gemacht wird. Die <code translate="No">WILL_RESUME_CONTENT</code> Veranstaltung sollte eine <code translate="No">ORIGINAL_EVENT</code> -Eigenschaft, die ausgegeben wird, nachdem die Videoansicht sichtbar gemacht wurde. Die <code translate="No">ORIGINAL_EVENT</code> sollte a . sein <code translate="No">PLAY</code> Ereignis, um die Wiedergabe fortzusetzen, a <code translate="No">CUE_POINT</code> Ereignis, um die Cue-Point-Verarbeitung fortzusetzen, oder a <code translate="No">COMPLETED</code> Ereignis, um die Wiedergabe abzuschließen. EIN <code translate="No">SKIP_CUE_POINTS</code> Eigenschaft sollte hinzugefügt werden <code translate="No">ORIGINAL_EVENT</code> um eine rekursive Cue-Point-Verarbeitung zu verhindern.</p>
</div>
</section>

<section class="bcls-section">
<h2 id="Cue_points">Cue-Punkte</h2>

<div class="BCL-concept">
<p>Viele Plugins werden darauf hören wollen <code translate="No">CUE_POINT</code> Veranstaltungen. Es gibt drei Arten von Cue-Points, <code translate="No">BEFORE</code> , <code translate="No">POINT_IN_TIME</code> , und <code translate="No">AFTER</code> . <code translate="No">BEFORE</code> Cue-Punkte werden unmittelbar vor Beginn der Wiedergabe ausgegeben. <code translate="No">POINT_IN_TIME</code> Cue-Punkte werden ausgegeben, wenn die Wiedergabe die Position des Cue-Punkts erreicht. <code translate="No">AFTER</code> Cue-Punkte werden unmittelbar nach Abschluss der Wiedergabe ausgegeben. Ein Plugin sollte verwenden <code translate="No">WILL_INTERRUPT_CONTENT</code> und <code translate="No">WILL_RESUME_CONTENT</code> Ereignisse, um die Inhaltswiedergabe zu unterbrechen und fortzusetzen, wenn ein Cue-Point-Ereignis verarbeitet wird. Bei Vorher- und Nachher-Cue-Punkten beinhaltet das Ereignis eine <code translate="No">ORIGINAL_EVENT</code> Eigentum, entweder mit a <code translate="No">PLAY</code> Veranstaltung oder a <code translate="No">COMPLETED</code> Veranstaltung. Cue-Point-Events beinhalten auch a <code translate="No">CUE_POINTS</code> -Eigenschaft mit dem Stapel von Cue-Punkten. <code translate="No">START_TIME</code> und <code translate="No">END_TIME</code> Eigenschaften definieren den Cue-Point-Zeitbereich.</p>
</div>
</section>

<section class="bcls-section">
<h2 id="Sample_directory">Beispielverzeichnis</h2>

<div class="BCL-concept">
<p>Die <a href="https://github.com/BrightcoveOS/android-plugin-guide/tree/master/sample">Beispielverzeichnis</a> enthält ein auf Android Studio basierendes Projekt mit zwei Modulen:</p>

<ul>
	<li><strong>BeispielPlugin</strong> - Ein Beispiel-Plugin, das als Grundlage zum Schreiben neuer Plugins verwendet werden kann.</li>
	<li><strong>SamplePluginApplication</strong> - Zeigt, wie Plugins in eine Brightcove-Videoanwendung integriert werden und zum Testen des SamplePlugin oder neuer Plugins verwendet werden können.</li>
</ul>
</div>
</section>

<section class="bcls-section">
<h2 id="Implementation_steps">Umsetzungsschritte</h2>

<div class="BCL-concept">
<p>Die Schritte zum Schreiben eines Plugins umfassen:</p>

<ol>
	<li>Kopieren Sie das Beispiel-Plugin in ein neues Repository.</li>
	<li>Ändern Sie die Paket- und Klassennamen.</li>
	<li>Aktualisieren Sie die <code translate="No">TAG</code> Initialisierer.</li>
	<li>Bearbeiten Sie die <code translate="No">@Emits</code> und <code translate="No">@ListensFor</code> Anmerkungen, um die Ereignisse widerzuspiegeln, die das Plugin ausgibt und auf die es lauscht.</li>
	<li>Ändern Sie den Konstruktor nach Bedarf.</li>
	<li>Ersetzen oder entfernen Sie die <code translate="No">videoView</code> zugehörige Logik nach Bedarf.</li>
	<li>Ändern <code translate="No">initializeListeners()</code> durch Hinzufügen und/oder Subtrahieren von Ereignis-Listenern nach Bedarf.</li>
	<li>Kompilieren und verteilen Sie Ihr Plugin als ein <strong>.aar</strong> Datei für Android Studio.</li>
	<!--                <li>Compile and distribute your plugin as a .jar file for Eclipse and/or an .aar file for Android Studio.</li>-->
</ol>
</div>
</section>
</article>