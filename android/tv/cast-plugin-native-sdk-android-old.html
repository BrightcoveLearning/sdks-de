---
title: 'Das Cast-Plugin für das Native SDK für Android'
description: In diesem Thema erfahren Sie, wie Sie Ihre Videos mithilfe des Cast-Plug-ins für das Brightcove Player SDK für Android auf einen mit Chromecast verbundenen Fernseher übertragen.
parent: Connected TV 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">Überblick</h2>

<p>Mit <a href="https://developers.google.com/cast/docs/developers">Google Cast</a> Technologie können Sie gestreamte Videoinhalte von Ihren Mobilgeräten zu hochauflösenden Fernseh- und Heimaudiosystemen initiieren und steuern. In Ihrer App können Sie auf die Cast-Schaltfläche tippen, um Ihre Inhalte auf einem großen Bildschirm zu streamen.</p>

<p>Um eine Cast-Anwendung zu erstellen, benötigen Sie die folgenden Komponenten:</p>

<ul>
	<li>
	<p>EIN <strong>Absender Bewerbung</strong> - Diese befindet sich auf Ihrem Mobilgerät und erkennt Empfängergeräte, stellt eine sichere Verbindung her und spiegelt Ihre Inhalte. Die Sender-App ist der lokale Player, der auf Chromecast übertragen wird. Nachdem Sie die Übertragung an die Empfänger-App vorgenommen haben, können Sie sie sich als Fernbedienung für den Chromecast vorstellen.</p>

	<p>Die Absender-App wird vom Cast-Plug-in für das Brightcove Player SDK für Android bereitgestellt. Sie erfahren es in diesem Thema.</p>
	</li>
	<li>
	<p>EIN <strong>Empfängeranwendung</strong> - Dies ist der Code, der auf dem Chromecast-Gerät ausgeführt wird. Man kann es sich als eine einseitige HTML-App mit CSS- und JS-Assets vorstellen.</p>

	<p>Gehen Sie zum Testen wie folgt vor:</p>

	<ol class="bcls-tasklist">
		<li>Beginnen mit <a href="https://github.com/googlecast/CastReceiver">Sample Cast-Empfänger von Google</a></li>
		<li>Rezension <a href="https://developers.google.com/cast/v2/receiver_apps#default">Googles Standard-Media-Receiver</a> Dokumentation</li>
	</ol>

	<p>Für die Produktion müssen Sie Ihre eigene Empfänger-App erstellen, da Google die Verwendung seiner Demo-Empfänger-App in einer Produktionsumgebung nicht unterstützt. Weitere Informationen finden Sie in Googles <a href="https://developers.google.com/cast/docs/receiver_apps">Cast-Receiver-Anwendungen</a> Dokumentation.</p>
	</li>
</ul>

<aside class="bcls-aside bcls-aside--information">Das Cast-Plug-in für das Brightcove Player SDK für Android bietet Sender-App-Funktionalität, aber Sie müssen Ihre eigene Empfänger-App implementieren.</aside>
</section>

<section class="bcls-section">
<h2 id="Cast_plugin">Cast-Plugin</h2>

<p>Das Cast-Plugin basiert auf dem <a href="https://medium.com/google-exoplayer/new-cast-extension-and-demo-app-55816a50012">neue ExoPlayer Cast-Erweiterung</a> und das Google Play Services Cast Framework. Nach dem Hinzufügen der Cast-Plugin-Abhängigkeit zieht gradle die Play Services Cast Framework-Abhängigkeit, die ExoPlayer Cast Extension-Abhängigkeit zusammen mit anderen erforderlichen Abhängigkeiten. Weitere Informationen zu den verwendeten Abhängigkeiten finden Sie im <a href="">Abhängigkeiten von Cast-Plugins</a> Sektion.</p>

<h3 id="Supported_SDK_version">Unterstützte SDK-Version</h3>

<p>Für das Cast-Plug-in müssen Sie das Brightcove Native SDK für Android ab Version 6.3.0 verwenden.</p>
</section>

<section class="bcls-section">
<h2 id="Getting_started">Einstieg</h2>

<p>Führen Sie die folgenden Schritte aus, um das Cast-Plugin zu verwenden:</p>

<ol class="bcls-tasklist-restart">
	<li>In deiner <strong>build.gradle</strong> fügen Sie die folgende Abhängigkeit hinzu, um das Cast-Plug-in einzuschließen:

	<pre>
<code class="language-swift" translate="No">implementation "com.brightcove.player:android-cast-plugin:6.3.0"</code></pre>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Options_Provider">Optionsanbieter</h2>

<p>Als nächstes müssen Sie die <a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/OptionsProvider">OptionenAnbieter</a> Implementierung für das Google Cast-Framework. Die <code translate="No">OptionsProvider</code> Schnittstelle hilft bei der Einrichtung mehrerer Optionen, die zum Initialisieren der <a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/CastContext">CastContext</a> Klasse. Hier legen Sie die Cast-Empfänger-App-ID fest. Um mehr über die Integration der . zu erfahren <code translate="No">OptionsProvider</code> , siehe Google-Dokument: <a href="https://developers.google.com/cast/docs/android_sender_integrate#initialize_the_cast_context">Den Besetzungskontext initialisieren</a>.</p>

<p>Das Brightcove Cast-Plug-in enthält Folgendes: <code translate="No">DefaultOptionsProvider</code> -Klasse, in der eine standardmäßige Google Demo Cast-Empfänger-App-ID über einen Zeichenfolgenschlüssel festgelegt wird, der in der <strong>strings.xml</strong> Datei. Weitere Informationen und Informationen zum Überschreiben finden Sie im <a href="">Cast-Empfänger-App-ID</a> Sektion.</p>

<ol class="bcls-tasklist">
	<li>Ob Sie die <code translate="No">DefaultOptionsProvider</code> Klasse oder deine eigene <code translate="No">OptionsProvider</code> Implementierung müssen Sie die <code translate="No">OptionsProvider</code> Name der Implementierungsklasse im <strong>AndroidManifest.xml</strong> Datei als Schlüssel-Wert-Paar-Metadaten, wie hier gezeigt:

	<pre class="line-numbers">
<code class="language-swift" translate="No">&lt;meta-data
android:name="com.google.android.gms.cast.framework.OPTIONS_PROVIDER_CLASS_NAME"
android:value="com.brightcove.cast.DefaultOptionsProvider" /&gt;</code></pre>
	</li>
</ol>

<p>Wenn Sie das verwenden <code translate="No">DefaultOptionsProvider</code> Klasse können Sie die <code translate="No">ExpandedControllerActivity</code> und aktivieren/deaktivieren Sie die Cast-Benachrichtigung, indem Sie ähnliche Metadateninformationen in Ihrem AndroidManifest festlegen.</p>
</section>

<section class="bcls-section">
<h2 id="Expanded_Controller_Activity">Erweiterte Controller-Aktivität</h2>

<p>Die <a href="https://developers.google.com/android/reference/com/google/android/gms/cast/framework/media/widget/ExpandedControllerActivity">Erweiterte Controller-Aktivität</a> wird mit der Google Cast-Bibliothek geliefert und ermöglicht es Ihnen, das auf Ihrem Chromecast-Gerät übertragene Video zu steuern. Diese Klasse bietet eine gewisse Anpassungsflexibilität. Es stehen beispielsweise fünf Slots zum Anzeigen von Schaltflächen zur Verfügung, wobei der dritte Slot für die nicht konfigurierbare Play-Schaltfläche reserviert ist. Die restlichen Schaltflächen können als andere vordefinierte Schaltflächen oder als Ihre eigenen benutzerdefinierten Schaltflächen eingerichtet werden.</p>

<p>Das Brightcove Cast-Plug-in bietet die Unterklasse <code translate="No">DefaultExpandedControllerActivity</code>. Wir haben die folgenden Schaltflächen in der folgenden Reihenfolge aktiviert:</p>

<ul>
	<li><strong>Untertitel</strong></li>
	<li><strong>Zurück überspringen</strong></li>
	<li><strong>Spiel</strong></li>
	<li><strong>Das Nächste überspringen</strong></li>
	<li><strong>Stummschaltung</strong></li>
</ul>

<p>Darüber hinaus stellt die Suchleiste die gleiche Standard-Zeichnbarkeit ein, die im Standard verwendet wird <code translate="No">BrightcoveMediaController</code>:</p>

<ul>
	<li>Der Fortschritt Drawable:
	<pre>
<code class="language-swift" translate="No">R.drawable.default_scrubber_progress_horizontal</code></pre>
	</li>
	<li>Der Daumen zum Zeichnen:
	<pre>
<code class="language-swift" translate="No">R.drawable.default_scrubber_thumb</code></pre>
	</li>
</ul>

<p>Informationen zum Anpassen der Suchleiste finden Sie im <a href="https://github.com/BrightcoveOS/android-player-samples/tree/master/brightcove-player-controls/SeekBarColorsSampleApp/src/main">SeekBarColorsSampleApp</a>.</p>

<ol class="bcls-tasklist">
	<li>Um die <code translate="No">DefaultExpandedControllerActivity</code> oder deine eigene <code translate="No">ExpandedControllerActivity</code> , legen Sie die folgenden Metadaten in Ihrem <strong>AndroidManifest.xml</strong> Datei:

	<pre class="line-numbers">
<code class="language-swift" translate="No">&lt;meta-data  android:name="com.brightcove.cast.DefaultOptionsProvider.EXPANDED_CONTROLLER_ACTIVITY_CLASS_NAME"
android:value="com.brightcove.cast.DefaultExpandedControllerActivity" /&gt;</code></pre>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Cast_Notification">Cast-Benachrichtigung</h2>

<p>Wenn die Cast-Benachrichtigung aktiviert ist, wird die Benachrichtigung angezeigt, wenn Sie ein Video streamen und Ihre App in den Hintergrund stellen. B. nach Drücken der Home-Taste.</p>

<ol class="bcls-tasklist">
	<li>Um die Cast-Benachrichtigung zu aktivieren, legen Sie die folgenden Metadaten in Ihrem . fest <strong>AndroidManifest.xml</strong> Datei und geben Sie den Namen der Aktivität an, die gestartet werden soll, wenn auf die Benachrichtigung geklickt wird:

	<pre class="line-numbers">
<code class="language-swift" translate="No">&lt;meta-data android:name="com.brightcove.cast.DefaultOptionsProvider.NOTIFICATION_TARGET_ACTIVITY_CLASS_NAME"
android:value="com.brightcove.cast.BrightcoveControllerActivity" /&gt;</code></pre>
	</li>
</ol>

<p>Wenn Sie com.brightcove.cast.DefaultOptionsProvider.NOTIFICATION_TARGET_ACTIVITY_CLASS_NAME nicht angeben oder der Wert einen ungültigen Aktivitätsnamen hat, wird die Besetzungsbenachrichtigung deaktiviert.</p>

<aside class="bcls-aside bcls-aside--information">Beim Entfernen der <code translate="No">meta-data</code> tag von der <strong>AndroidManifest.xml</strong> Datei deaktiviert Benachrichtigungen von der Absender-App, es ist jedoch weiterhin möglich, eine Benachrichtigung auf dem Absendergerät anzuzeigen, die darauf hinweist, dass ein Gerät über Ihr Wi-Fi-Netzwerk sendet. Dies ist keine Benachrichtigung der Sender-App, sondern eine Benachrichtigung des Sendergeräts, unabhängig von einer App-Konfiguration.</aside>
</section>

<section class="bcls-section">
<h2 id="Cast_Receiver_App_Id">Cast-Empfänger-App-ID</h2>

<p>Legen Sie als Nächstes Ihre Google Cast-Empfänger-App-ID in Ihrem Projekt fest. Die Cast Receiver-Anwendung ist ein Webplayer, der für die Wiedergabe Ihrer Videos auf dem Chromecast-Gerät verantwortlich ist. Um mehr über Empfängeranwendungen zu erfahren, besuchen Sie <a href="https://developers.google.com/cast/docs/receiver_apps">Offizieller Leitfaden von Google</a>. Ihre Empfängeranwendung hat eine eindeutige hexadezimale ID. Dies ist die ID, die Sie in Ihrer Android-App festlegen.</p>

<ol class="bcls-tasklist">
	<li>Das Brightcove Cast-Plug-in legt standardmäßig eine Google Demo Receiver-App-ID fest, die für den Einstieg und das Testen hilfreich ist, jedoch nicht für die Produktion. Um diesen Wert mit Ihrer Cast-Receiver-Anwendung zu überschreiben, definieren Sie den folgenden Zeichenfolgenwert in Ihrem <strong>strings.xml</strong> Datei:

	<pre>
<code class="language-swift" translate="No">&lt;string name="cast_receiver_app_id"&gt;4F8B3483&lt;/string&gt;</code></pre>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="The_Cast_Button">Der Cast-Button</h2>

<p>Mit der Cast-Schaltfläche können Sie ein Chromecast-Gerät im selben Netzwerk wie Ihr Gerät auswählen, eine Verbindung herstellen und eine Sitzung erstellen. Folgen Sie dem Google-Dokument, um die Cast-Schaltfläche zu Ihrer Anwendung hinzuzufügen <a href="https://developers.google.com/cast/docs/android_sender_integrate#add_a_cast_button">Besetzung integrieren: Cast-Button hinzufügen</a>.</p>

<ol class="bcls-tasklist">
	<li>Das Brightcove Cast-Plug-in bietet eine Dienstprogrammmethode zum einfachen Einrichten der Cast-Schaltfläche. Dies ist nützlich, wenn Sie nur die Besetzungsschaltfläche zum Menü „Aktivität/Fragment“ hinzufügen möchten. Weitere Informationen finden Sie im folgenden Code:
	<pre class="line-numbers">
<code class="language-swift" translate="No">//Activity
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   super.onCreateOptionsMenu(menu);
   GoogleCastComponent.setUpMediaRouteButton(MainActivity.this, menu);
   return true;
}</code></pre>
	</li>
</ol>
</section>

<section class="bcls-section">
<h2 id="The_Mini_Controller">Der Mini-Controller</h2>

<p>Der Mini-Controller ist ein Fragment, das an Ihre Aktivität angehängt wird und sich normalerweise am unteren Rand des Layouts befindet. Der Mini-Controller ermöglicht Ihnen das Abspielen und Anhalten des Videos und zeigt an, wenn ein Video auf Ihrem Chromecast-Gerät abgespielt wird. Wenn auf den Mini-Controller geklickt wird, wird der erweiterte Controller gestartet.</p>

<ol class="bcls-tasklist">
	<li>Um den Mini Controller zu aktivieren, fügen Sie dem Layout Ihrer Aktivität den folgenden Code hinzu.
	<pre class="line-numbers">
<code class="language-swift" translate="No">&lt;fragment
   android:id="@+id/castMiniController"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:layout_alignParentBottom="true"
   android:visibility="gone"
   class="com.google.android.gms.cast.framework.media.widget.MiniControllerFragment" /&gt;</code></pre>
	</li>
</ol>

<p>Informationen zu Best Practices mit dem Mini Controller finden Sie im <a href="https://developers.google.com/cast/docs/design_checklist/sender#sender-mini-controller">Design-Checkliste: Sender Mini-Controller</a> dokumentieren. Einzelheiten zur Implementierung finden Sie in der <a href="https://developers.google.com/cast/docs/android_sender_integrate#add_mini_controller">Besetzung integrieren: Mini-Controller hinzufügen</a> dokumentieren.</p>
</section>

<section class="bcls-section">
<h2 id="The_Brightcove_GoogleCastComponent">Die Brightcove-GoogleCast-Komponente</h2>

<p>Die <code translate="No">GoogleCastComponent</code>Die GoogleCastComponent-Klasse ist die Hauptklasse des Brightcove Cast-Plug-ins. Es instanziiert den ExoPlayer CastPlayer und setzt seine Listener. Es stellt einige wichtige Methoden zum Laden eines Videos oder zum Hinzufügen zur Warteschlange bereit. Die <code translate="No">GoogleCastComponent</code> -Klasse fügt außerdem mehrere Brightcove-Ereignis-Listener hinzu, um Aktivitäts- und Fragment-Lebenszyklusereignisse zu verarbeiten, sowie andere Ereignis-Listener, mit denen Sie Medieninformationen ausgeben können, um ein Video auf Ihr Chromecast-Gerät zu laden.</p>

<p>Das Cast-Plug-in wurde so konzipiert, dass es mit Video Cloud nur minimalen Aufwand erfordert. Wenn Sie Video Cloud verwenden, <code translate="No">BrightcoveCastMediaManager</code> -Klasse sammelt Informationen aus der Video Cloud-Antwort, z. B. die Brightcove-Video- und Source-Objekte, jedes Mal, wenn <code translate="No">EventType.SET_SOURCE</code> Ereignis ausgegeben wird. Diese Informationen werden zwischengespeichert und können verwendet werden, wenn der Benutzer die Wiedergabe auswählt, um das Video in die Warteschlange zu stellen.</p>

<ol class="bcls-tasklist">
	<li>Um die . zu erstellen <code translate="No">GoogleCastComponent</code> Klasse, du musst die bestehen <code translate="No">Context</code> und <code translate="No">EventEmitter</code>:

	<pre>
<code class="language-swift" translate="No">GoogleCastComponent googleCastComponent = new GoogleCastComponent(eventEmitter, context);</code></pre>

	<p>Oder du kannst Unterklassen <code translate="No">BrightcoveCastMediaManager</code> um einen Teil seines Verhaltens zu überschreiben und an die <code translate="No">GoogleCastComponent</code>:</p>

	<pre class="line-numbers">
<code class="language-swift" translate="No">MyBrightcoveCastMediaManager myBrightcoveCastMediaManager = new MyBrightcoveCastMediaManager(context, eventEmitter);

GoogleCastComponent googleCastComponent = new GoogleCastComponent(eventEmitter, context, myBrightcoveCastMediaManager);</code></pre>
	</li>
</ol>

<p>Dies ist alles, was Sie brauchen, um Videos auf Ihr Chromecast-Gerät zu streamen.</p>
</section>

<section class="bcls-section">
<h2 id="Listening_for_Cast_session">Cast-Sitzung anhören</h2>

<p>Wenn Sie möchten, dass Ihre App reagiert, wenn die Cast-Verbindung beginnt oder endet, können Sie die <code translate="No">GoogleCastEventType.CAST_SESSION_STARTED</code> oder <code translate="No">GoogleCastEventType.CAST_SESSION_ENDED</code> Ereignis-Listener wie hier gezeigt:</p>

<pre class="line-numbers">
<code class="language-swift" translate="No">eventEmitter.on(GoogleCastEventType.CAST_SESSION_STARTED, new EventListener() {
   @Override
   public void processEvent(Event event) {
       // Session Started
   }
});
eventEmitter.on(GoogleCastEventType.CAST_SESSION_ENDED, new EventListener() {
   @Override
   public void processEvent(Event event) {
       // Session Ended
   }
});</code></pre>

<p>Alternativ können Sie anrufen <code translate="No">GoogleCastComponent.isSessionAvailable()</code> um nach einer verfügbaren Sitzung zu suchen.</p>
</section>

<section class="bcls-section">
<h2 id="Casting_a_Video">Ein Video streamen</h2>

<p>Um nach erfolgreicher Verbindung ein Video auf Chromecast zu streamen, können Sie entweder den EventEmitter verwenden und die Media Info-Informationen ausgeben oder Sie können direkt die <code translate="No">GoogleCastComponent</code> Methoden.</p>

<p>Wenn Sie die Medieninfo lieber ausgeben möchten, können Sie die folgenden Ereignisse verwenden:</p>

<ul>
	<li><code translate="No">GoogleCastEventType.LOAD_MEDIA_INFO</code></li>
	<li><code translate="No">GoogleCastEventType.LOAD_MEDIA_QUEUE_ITEM</code></li>
	<li><code translate="No">GoogleCastEventType.ADD_MEDIA_INFO</code></li>
	<li><code translate="No">GoogleCastEventType.ADD_MEDIA_QUEUE_ITEM</code></li>
</ul>

<p>Die folgende Tabelle zeigt die erwarteten Eigenschaften für jedes Ereignis:</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th rowspan="2">Veranstaltungsname</th>
			<th colspan="2">Eigenschaften</th>
		</tr>
		<tr>
			<th>Taste</th>
			<th>Wertklassentyp</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td><code translate="No">LOAD_MEDIA_INFO</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_INFO</code><br />
			<code translate="No">GoogleCastComponent.CAST_MEDIA_PLAY_POSITION</code></td>
			<td><code translate="No">MediaInfo</code> Ganze Zahl</td>
		</tr>
		<tr>
			<td><code translate="No">LOAD_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">MediaQueueItem</code></td>
		</tr>
		<tr>
			<td><code translate="No">ADD_MEDIA_INFO</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_INFO</code><br />
			<code translate="No">GoogleCastComponent.CAST_MEDIA_PLAY_POSITION</code></td>
			<td><code translate="No">MediaInfo</code> Ganze Zahl</td>
		</tr>
		<tr>
			<td><code translate="No">ADD_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">GoogleCastComponent.CAST_MEDIA_QUEUE_ITEM</code></td>
			<td><code translate="No">MediaQueueItem</code></td>
		</tr>
	</tbody>
</table>

<p>Alternativ können Sie die folgenden GoogleCastComponent-Methoden verwenden:</p>

<ul>
	<li>
	<pre>
<code class="language-swift" translate="No">public void loadMediaInfo(MediaInfo mediaInfo, long positionMs)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">public void loadMediaInfo(MediaInfo mediaInfo)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">public PendingResult&lt;RemoteMediaClient.MediaChannelResult&gt; loadItem(MediaQueueItem mediaQueue, int playheadPosition)</code></pre>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">public PendingResult&lt;RemoteMediaClient.MediaChannelResult&gt; addItems(MediaQueueItem... mediaQueue )</code></pre>
	</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Changing_the_default_MediaInfo_data">Ändern der Standard-MediaInfo-Daten</h2>

<p>Standardmäßig sammelt das Cast-Plugin Informationen über das aktuelle Video- und Quellobjekt, das vom <code translate="No">EventType.SET_SOURCE event</code>. Wenn Sie zusätzliche Informationen ändern oder hinzufügen möchten, z. B. ein benutzerdefiniertes JSON-Objekt zu Ihrem <code translate="No">MediaInfo</code> die Ihr App-Empfänger versteht, können Sie dies tun, indem Sie die <code translate="No">loadMediaInfo()</code> und <code translate="No">addMediaInfo()</code> Methoden aus der <code translate="No">BrightcoveCastMediaManager</code>. Dann, dein <code translate="No">BrightcoveCastMediaManager</code> Unterklasse wird als Konstruktorparameter an die <code translate="No">GoogleCastComponent</code> Klasse.</p>

<p>Innerhalb dieser Methoden können Sie Ihre <code translate="No">MediaInfo</code> Objekte und geben die entsprechenden Ereignisse aus, wie zuvor gezeigt. Unbedingt überprüfen <code translate="No">com.brightcove.cast.util.CastMediaUtil</code> , da es einige Dienstprogrammmethoden zum Erstellen eines <code translate="No">MediaInfo</code> aus den Video- und Quellobjekten.</p>
</section>

<section class="bcls-section">
<h2 id="Configuring_the_Cast_MediaController">Konfiguration des Cast MediaControllers</h2>

<p>Gehen Sie folgendermaßen vor, um das Controller-Layout zu ändern, das in Ihrer Brightcove-Videoansicht angezeigt wird, wenn eine Cast-Sitzung gestartet wurde.</p>

<ol class="bcls-tasklist-restart">
	<li><a href="#Extend_the_BrightcoveCastMediaManager">Erweitern Sie den BrightcoveCastMediaManager</a></li>
	<li><a href="#Set_the_MediaControllerConfig">Setzen Sie die MediaControllerConfig</a></li>
	<li><a href="#Overwrite_the_control_bar_setup">Überschreiben Sie das Setup der Steuerleiste</a></li>
</ol>

<h3 id="Extend_the_BrightcoveCastMediaManager">Erweitern Sie den BrightcoveCastMediaManager</h3>

<p>So ändern Sie das Standardverhalten der <code translate="No">BrightcoveCastMediaManager</code> , erstellen Sie eine Unterklasse und überschreiben Sie einige Schlüsselmethoden:</p>

<ul>
	<li>
	<pre>
<code class="language-swift" translate="No">public void updateBrightcoveMediaController(boolean isRemote)</code></pre>

	<p>Diese Methode wird aufgerufen von der <code translate="No">GoogleCastComponent</code> wenn sich die Sitzung ändert; das heißt, wenn die Sitzung begonnen oder beendet wurde. Wenn die Sitzung begonnen hat, wird die <code translate="No">isRemote</code> Parameter wird sein <code translate="No">true</code> und der <code translate="No">setupRemoteController</code> Methode aufgerufen wird. Ansonsten der <code translate="No">isRemote</code> wird sein <code translate="No">false</code> und der <code translate="No">resetToLocalController</code> wird genannt.</p>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">protected void setupRemoteController()</code></pre>

	<p>Diese Methode gibt das Ereignis aus <code translate="No">EventType.SET_MEDIA_CONTROLLER_CONFIG</code> mit dem <code translate="No">MediaControllerConfig</code> Objekt. Wir werden mehr darüber reden <code translate="No">MediaControllerConfig</code> später in diesem Abschnitt. Diese Methode hört auch auf die <code translate="No">BrightcoveMediaController.CONTROL_BAR_CREATED</code> Ereignis und reagiert mit Aufruf des <code translate="No">setupBrightcoveControlBar</code> Methode.</p>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">protected void resetToLocalController()</code></pre>

	<p>Diese Methode ist für das Zurücksetzen der <code translate="No">BrightcoveMediaController</code> zum ursprünglichen Controller-Layout durch Senden des <code translate="No">EventType.RESTORE_DEFAULT_MEDIA_CONTROLLER</code>.</p>
	</li>
	<li>
	<pre>
<code class="language-swift" translate="No">protected void setupBrightcoveControlBar(BrightcoveControlBar controlBar)</code></pre>

	<p>Sobald die <code translate="No">BrightcoveMediaController</code> wurde mit dem Layout in der bereitgestellten neu erstellt <code translate="No">MediaControllerConfig</code> , erhalten Sie Zugang zum <code translate="No">BrightcoveControlBar</code> Aussicht. Von hier aus können Sie auf Ihre UI-Ansichten zugreifen, z. B. Schaltflächen, in denen Sie hinzufügen können <code translate="No">OnClickListener</code>ist für sie.</p>
	</li>
</ul>

<h3 id="Set_the_MediaControllerConfig">Setzen Sie die MediaControllerConfig</h3>

<p>Die <code translate="No">MediaControllerConfig</code> ist eine Konfigurationsklasse, mit der Sie das standardmäßige Steuerelementlayout des <code translate="No">BrightcoveMediaController</code> Klasse. In dieser Klasse können Sie das Layout und die <code translate="No">OnTouchListener</code>. Nach dem Erstellen und Konfigurieren können Sie dieses Objekt wie unten gezeigt ausgeben:</p>

<pre class="line-numbers">
<code class="language-swift" translate="No">Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();
properties.put(Event.MEDIA_CONTROLLER_CONFIG, myMediaControllerConfig);
eventEmitter.emit(EventType.SET_MEDIA_CONTROLLER_CONFIG,properties);</code></pre>

<p>Der Standard <code translate="No">MediaControllerConfig</code> Objekt setzt die <code translate="No">R.layout.cast_media_controller</code> wie das Layout mit einem einzigen <strong>Spiel</strong> Taste. Wenn Sie darauf klicken, wird ein Dialogfeld mit zwei Optionen geöffnet:</p>

<ul>
	<li><strong>Jetzt spielen</strong> - Wenn ausgewählt, wird die <code translate="No">loadMediaInfo()</code> -Methode aufgerufen und das Video wird geladen und in Chromecast abgespielt.</li>
	<li><strong>Zur Warteschlange hinzufügen</strong> - Wenn ausgewählt, wird die <code translate="No">addMediaInfo()</code> -Methode aufgerufen und das Video wird am Ende der Warteschlange hinzugefügt.</li>
</ul>

<aside class="bcls-aside bcls-aside--information">Wenn Sie die gleiche Benutzeroberfläche beibehalten möchten, aber zusätzliche Informationen in das übertragene Video laden möchten, können Sie die <code translate="No">loadMediaInfo()</code> und <code translate="No">addMediaInfo()</code> Methoden und passen Sie die Informationen an, die Sie dem <code translate="No">MediaInfo</code> Objekt.</aside>

<h3 id="Overwrite_the_control_bar_setup">Überschreiben Sie das Setup der Steuerleiste</h3>

<p>Wenn Ihr Media-Controller-Layout durch Ausgeben des <code translate="No">MediaControllerConfig</code> , das <code translate="No">BrightcoveControlBar</code> Ansicht wird erstellt und die <code translate="No">BrightcoveCastMediaManager.setupBrightcoveControlBar()</code> Methode aufgerufen wird. Hier können Sie Ihre UI-Komponenten nach ID abrufen und die entsprechenden Listener hinzufügen.</p>

<pre class="line-numbers">
<code class="language-swift" translate="No">@Override
protected void setupBrightcoveControlBar(BrightcoveControlBar controlBar) {
   Button playButton = controlBar.findViewById(R.id.cast_play);
   if (playButton != null) {
       playButton.setOnClickListener(new View.OnClickListener() {...});
   }
}</code></pre>
</section>

<section class="bcls-section">
<h2 id="Cast_plugin_dependencies">Abhängigkeiten von Cast-Plugins</h2>

<p>Das Cast-Plugin hängt von der ExoPlayer-Cast-Erweiterung ab:</p>

<pre>
<code class="language-swift" translate="No">compile 'com.google.android.exoplayer:extension-cast:2.7.0'</code></pre>

<p>Die Erweiterung hat mehrere Abhängigkeiten, die in der folgenden Tabelle aufgeführt sind:</p>

<table class="bcls-table">
	<thead class="bcls-table__head">
		<tr>
			<th>Name</th>
			<th>Vollständige Notation und aktuelle Version</th>
		</tr>
	</thead>
	<tbody class="bcls-table__body">
		<tr>
			<td>Mediarouter v7<a href="https://developer.android.com/reference/android/support/v7/media/MediaRouter"></a></td>
			<td><code translate="No">com.android.support:mediarouter-v7:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developer.android.com/topic/libraries/support-library/packages#v7">Appkompat v7</a></td>
			<td><code translate="No">com.android.support:appcompat-v7:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developer.android.com/topic/libraries/support-library/packages#v4">Unterstützung v4</a></td>
			<td><code translate="No">com.android.support:support-v4:27.0.0</code></td>
		</tr>
		<tr>
			<td><a href="https://developers.google.com/android/reference/com/google/android/gms/cast/package-summary">Cast-Framework</a></td>
			<td><code translate="No">com.google.android.gms:play-services-cast-framework:11.4.2</code></td>
		</tr>
		<tr>
			<td><a href="https://github.com/google/ExoPlayer/tree/release-v2/library/core">ExoPlayer-Core</a></td>
			<td><code translate="No">com.google.android.exoplayer:exoplayer-core:2.7.0</code></td>
		</tr>
		<tr>
			<td><a href="https://github.com/google/ExoPlayer/tree/release-v2/library/ui">ExoPlayer-Benutzeroberfläche</a></td>
			<td><code translate="No">com.google.android.exoplayer:exoplayer-ui:2.7.0</code></td>
		</tr>
	</tbody>
</table>
</section>

<section class="bcls-section">
<h2 id="Limitations">Einschränkungen</h2>

<p>Mit der aktuellen Version des Brightcove Native SDK für Android werden bestimmte Video Cloud-Funktionen nur eingeschränkt unterstützt oder werden nicht unterstützt, wenn das Cast-Plug-in mit der Google-Beispielempfänger-App verwendet wird:</p>

<ul>
	<li>Bildunterschriften
	<ul>
		<li>Nur In-Manifest-Untertitel mit Dynamic Delivery DASH werden wie erwartet angezeigt, wenn das Cast-Plug-in mit der Google-Beispielempfänger-App verwendet wird.</li>
		<li>In-Manifest-Untertitel mit HLS- und Sidecar-Untertiteln in einer Videokonfiguration werden derzeit nicht unterstützt, wenn das Cast-Plug-in mit der Google-Beispielempfänger-App verwendet wird.</li>
	</ul>
	</li>
	<li>Widevine Modular DRM wird nicht unterstützt, wenn das Cast-Plug-in mit der Google-Beispielempfänger-App verwendet wird.</li>
	<li>Mehrere Audiotracks werden nicht unterstützt, wenn das Cast-Plug-in mit der Google-Beispielempfänger-App verwendet wird.</li>
	<li>Clientseitige und serverseitige Werbung wird nicht unterstützt, wenn das Cast-Plug-in mit der Google-Beispielempfänger-App verwendet wird.</li>
	<li>Live- und Live-DVR-Streams werden nicht unterstützt, wenn das Cast-Plug-in mit der Google-Beispielempfänger-App verwendet wird.</li>
	<li>Das Streamen von Offline-Videos wird derzeit nicht unterstützt. Wenn Sie ein Video herunterladen, wird die Quell-URL so geändert, dass sie auf eine lokale Datei verweist. Wenn Sie dann versuchen, dieses Video zu streamen, wählt das Plug-in die lokale Quelle aus, aber das Chromecast-Gerät kann das Video nicht anfordern.</li>
</ul>

<h3 id="Handling_currently_unsupported_features">Umgang mit derzeit nicht unterstützten Funktionen</h3>

<p>Das Cast-Plug-in ist dafür verantwortlich, MediaInfo-Daten wie Video-URL, Titel, Beschreibung und Posterbild zu sammeln und auf Ihr verbundenes Chromecast-Gerät zu übertragen. Beachten Sie, dass die erfolgreiche Wiedergabe des Videos und die Anzeige der Metadaten letztendlich vom Anwendungsempfänger abhängt.</p>

<p>Es liegt in der Verantwortung des Entwicklers, den Application Receiver im Hinblick auf seine Unterstützung und seine Einschränkungen zu bewerten. Daher sollte der Entwickler UI-Elemente implementieren, die den Benutzer darüber informieren, was gecastet werden kann und was nicht. Wenn der Application Receiver beispielsweise Videos mit DRM oder Anzeigen nicht unterstützt, muss Ihre Android-App diese Szenarien verarbeiten.</p>
</section>

<section class="bcls-section">
<h2 id="Known_Issues">Bekannte Probleme</h2>

<h3>Android 9</h3>

<p>Wenn Sie Chromecast mit Android 9 verwenden, müssen Sie ein <code translate="No">FOREGROUND_SERVICE</code> Erlaubnis. Auf diese Weise kann die App Benachrichtigungen verwenden, um eine Casting-Sitzung zu steuern, wenn die App im Hintergrund und wieder in den Vordergrund gebracht wird.</p>

<p>Die <code translate="No">uses-permission</code> Tag sollte der App hinzugefügt werden <strong>AndroidManifest.xml</strong> Datei wie folgt:</p>

<pre>
<code class="language-java" translate="No">&lt;uses-permission android:name="android.permission.FOREGROUND_SERVICE"/&gt;</code></pre>

<h3>Lautstärkeregelung</h3>

<p>Der Lautstärkeregler im Cast-Dialogfeld kann auf dem sendenden Gerät nicht ganz auf Null zurückgehen. Wenn Sie den Lautstärkeregler im Cast-Dialogfeld oder die Lautstärketasten auf dem sendenden Gerät verwenden, springt die angezeigte Lautstärke möglicherweise leicht zurück und zeigt beim Sender einen Wert ungleich Null an. Der Empfänger zeigt jedoch einen Wert ungleich Null an. Dies ist ein Verhalten im Google Cast-Dialogfeld und nicht im Brightcove Android SDK.</p>

<h4>Google Play-Dienste</h4>

<p>Die Casting-Verbindung darf nicht erstellt werden, wenn die Version der Google Play-Dienste des Absenders nicht aktuell ist. Wenn die Google Play-Dienste des Absenders, insbesondere das Cast-Dienste-Framework, veraltet sind, kann es sein, dass Sie keine Cast-Verbindung herstellen können. Dies wird behoben, indem die Google Play-Dienste des Absenders über den Google Play Store aktualisiert werden.</p>
</section>
</article>