---
title: 'Programmgesteuerte Auswahl von Untertiteln mit dem nativen SDK für Android'
description: In diesem Thema erfahren Sie, wie Sie Untertitel programmgesteuert auswählen, wenn Sie das Brightcove Native SDK für Android verwenden.
parent: Captions 
grandparent: Android Development
---
 <h1>{{ page.title }}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>


<section class="bcls-section">
  <h2 id="Overview">Überblick</h2>
  <p>
    Das Native SDK für Android empfängt Untertitel von einem der folgenden Elemente:
  </p>
  <ul>
    <li>Brightcove-Katalogantwort (Wiedergabe-API): Sidecar WebVTT</li>
    <li>Videomanifest (HLS oder DASH) : In-manifest WebVTT</li>
  </ul>
  <p>
    Weitere Informationen zu Bildunterschriften finden Sie im <a href="https://sdks.support.brightcove.com/features/using-captions-brightcove-native-sdks.html">Verwenden von Untertiteln mit den nativen Brightcove-SDKs</a> dokumentieren.
  </p>
</section>

<section class="bcls-section">
  <h2 id="Event_sequence">Ereignisablauf</h2>
  <p>
    Das native SDK folgt dieser mit Untertiteln verknüpften Ereignissequenz:
  </p>
  <ol class="bcls-tasklist">
    <li>
      <p>
        Abrufen eines Videos aus dem Brightcove-Katalog (z. <code translate="No">catalog.findVideoByID()</code>).
      </p>
    </li>
    <li>
      <p>
        Sidecar-Untertitel werden aus der Katalogantwort geparst und den Videoeigenschaften hinzugefügt.
      </p>
    </li>
    <li>
      <p>
        An dieser Stelle können Sie Untertitelquellen wie folgt abrufen:
      </p>
      <pre><code class="language-java" translate="No">video.getProperties().get(Video.Fields.CAPTION_SOURCES);</code></pre>
    </li>
    <li>
      <p>
        Stellen Sie die Videoansicht ein. Das Video wird zu ExoPlayer hinzugefügt.
      </p>
      <pre><code class="language-java" translate="No">brightcoveVideoView.add(video);</code></pre>
    </li>
    <li>
      <p>
        Das Native SDK ruft Untertitelquellen ab und gibt das folgende Ereignis aus:
      </p>
      <pre><code class="language-java" translate="No">EventType.CAPTIONS_LANGUAGES</code></pre>
    </li>
    <li>
      <p>
        Nachdem das Video zu ExoPlayer hinzugefügt wurde, sucht das Native SDK nach Untertiteln im Manifest. Alle Untertitel, die noch nicht in den Video-Untertitelquellen vorhanden sind, werden hinzugefügt. Wenn neue Untertitelquellen vorhanden sind, wird das folgende Ereignis gesendet, um den Brightcove-Mediencontroller zu aktualisieren.
      </p>
      <pre><code class="language-java" translate="No">EventType.CAPTIONS_LANGUAGES</code></pre>
    </li>
  </ol>
</section>

<section class="bcls-section">
  <h2 id="Select_captions">Untertitel auswählen</h2>
  <p>
    Führen Sie diese Schritte aus, um Untertitel programmgesteuert auszuwählen:
  </p>
  <ol class="bcls-tasklist__restart">
    <li>
      <p>
        Erstellen Sie eine Methode, um eine bestimmte Untertitelquelle mit dem Sprachcode zu finden. Zum Beispiel:
      </p>
      <pre><code class="language-java" translate="No">private Pair&lt;Uri, BrightcoveCaptionFormat&gt; getCaptionsForLanguageCode(Video video, String languageCode) {
 Object payload = video == null ? null : video.getProperties().get(Video.Fields.CAPTION_SOURCES);

if (payload instanceof List) {
 @SuppressWarnings(&quot;unchecked&quot;)
 List&lt;Pair&lt;Uri, BrightcoveCaptionFormat&gt;&gt; pairs =
    (List&lt;Pair&lt;Uri, BrightcoveCaptionFormat&gt;&gt;) payload;

 for (Pair&lt;Uri, BrightcoveCaptionFormat&gt; pair : pairs) {
   if (pair.second.language().equals(languageCode)) {
     return pair;
   }
 }
}
return null;
}</code></pre>
    </li>
    <li>
      <p>
        Beachten Sie, dass Untertitelquellen in <code translate="No">Pair&lt;Uri, BrightcoveCaptionFormat&gt;</code>. Die <code translate="No">Uri</code> im Paar gibt den Typ Closed Captions an:
      </p>
      <ul>
        <li>
          <strong>Beiwagen</strong>: Die vollständige URL ist vorhanden
        </li>
        <li>
          <strong>In-Manifest</strong>: Das BrightcoveCaptionFormat.BRIGHTCOVE_SCHEME wird verwendet
        </li>
      </ul>
    </li>
    <li>
      <p>
        Erstellen Sie eine Methode, die für die Auswahl von Untertiteln aus einem Video mit einem bestimmten Sprachcode verantwortlich ist, indem Sie die <code translate="No">EventType.SELECT_CLOSED_CAPTION_TRACK</code> Veranstaltung.
      </p>
      <pre><code class="language-java" translate="No">private void selectCaption(Video video, String language) {
 Pair&lt;Uri, BrightcoveCaptionFormat&gt; pair = getCaptionsForLanguageCode(video, language);

if (pair != null &amp;&amp; !pair.first.equals(Uri.EMPTY)) {
 // BrightcoveCaptionFormat.BRIGHTCOVE_SCHEME indicates that is not a URL we need to load with the LoadCaptionsService, but instead we'll be enabled through a different component.
 if (!pair.first.toString().startsWith(BrightcoveCaptionFormat.BRIGHTCOVE_SCHEME)) {
   brightcoveVideoView.getClosedCaptioningController().getLoadCaptionsService().loadCaptions(pair.first, pair.second.type());
 }
 Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();
 properties.put(Event.CAPTION_FORMAT, pair.second);
 properties.put(Event.CAPTION_URI, pair.first);
 brightcoveVideoView.getEventEmitter().emit(EventType.SELECT_CLOSED_CAPTION_TRACK, properties);
}
}</code></pre>
    </li>
    <li>
      <p>
        Höre dem zu <code translate="No">EventType.CAPTIONS_LANGUAGES</code> Ereignis und wählen Sie die gewünschte Sprache über den Sprachcode aus.
      </p>
      <pre><code class="language-java" translate="No">brightcoveVideoView.getEventEmitter().once(EventType.CAPTIONS_LANGUAGES, new EventListener() {
@Override
public void processEvent(Event event) {
 brightcoveVideoView.setClosedCaptioningEnabled(true);

  // You could find the desired languaged in the LANGUAGES list.
  // List&lt;String&gt; languages = event.getProperty(Event.LANGUAGES, List.class);
 selectCaption(brightcoveVideoView.getCurrentVideo(), &quot;ja&quot;);
}
});</code></pre>
    </li>

  </ol>
</section>

</article>